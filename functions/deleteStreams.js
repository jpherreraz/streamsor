const admin = require("firebase-admin"); const serviceAccount = require("../service-account.json"); admin.initializeApp({ credential: admin.credential.cert(serviceAccount), databaseURL: "https://streamsor-6fb0e-default-rtdb.firebaseio.com" }); const db = admin.database(); const streamsRef = db.ref("streams"); async function deleteStreams() { try { const snapshot = await streamsRef.once("value"); const updates = {}; snapshot.forEach((childSnapshot) => { const streamId = childSnapshot.key; if (streamId !== "b4cdf5276546a2e3bb2af5c823e73d36") { updates[streamId] = null; } }); await streamsRef.update(updates); console.log("Successfully deleted all streams except b4cdf5276546a2e3bb2af5c823e73d36"); process.exit(0); } catch (error) { console.error("Error:", error); process.exit(1); } } deleteStreams();
